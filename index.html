<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="icon" href="https://glitch.com/favicon.ico" />
    <title>Beginner's Luck - Account Registration</title>
  </head>

  <script
    type="text/javascript"
    src="https://pingsandboxsdk.singularkey.com/latest/singularkey.js"
  ></script>

  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
  />
  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;600&display=swap"
    rel="stylesheet"
  />

  <script>
    function loadwidget() {    
      const skApiBaseUrl =
        "https://api.singularkey.com/v1";
      const companyId = "5d6c003f-8a59-4c99-a736-4e5a122862dd";
      const skApiKey =
        "764d5efa2538f79040363933311ef38c1797fead7f3266ad0f82a167e198b058010a203cf695d8694ff51b924e56ca9a162c4d86ce9989d2f947e84144f5f92a4106e882bd0a2101ba530313cf2b9e95702bb19b15988b18abd24daa795b9ea1230a3c400b9f2377cf2aa0e00321f244e7882abf141539faa8ade45ac03870de";
      const skPolicyId = "93c777f6702961fa3b7e77b329e9cac9";

      const skGetTokenUrl =
        skApiBaseUrl + "/company/" + companyId + "/sdkToken";

      //*** Add the API Key from your SK Application. ***/
      var headers = new Headers();
      headers.append("X-SK-API-KEY", skApiKey);
      headers.append("Content-type", "application/json");

      var requestOptions = {
        method: "GET",
        headers: headers,
        redirect: "follow",
      };

      //*** Retrieve SK Token ***/
      fetch(skGetTokenUrl, requestOptions)
        .then((response) => response.json())
        .then((responseData) => {
          var props = {
            config: {
              method: "runFlow",
              apiRoot: skApiBaseUrl,
              accessToken: responseData.access_token,
              companyId: companyId,
              policyId: skPolicyId,
            },
            useModal: false,
            successCallback,
            errorCallback,
            onCloseModal,
          };
          /*** Invoke Singular Key Widget ****/
          console.log(props);
          singularkey.skRenderScreen(document.getElementById("widget"), props);
        })
        .catch((error) => console.log("error", error));
    }

    function successCallback(response) {
      console.log(response);
    }

    function errorCallback(error) {
      console.log(error);
    }

    function onCloseModal() {
      console.log("onCloseModal");
    }
  </script>
  <body onload="loadwidget()">
<!--  UNCOMMENT LINE BELOW TO INCLUDE CSS    -->
    <link rel="stylesheet" href="/style.css" /> 

    <div class="background">
      <div class="shape"></div>
      <div class="shape"></div>
    </div>

    <div id="widget" class="skWidget widget">
      <!--Widget will appear here.-->
    </div>
    <div class="glitch">
      <a
        class="btn--remix"
        target="_top"
        href="https://glitch.com/edit/#!/remix/davinci-201-completed"
      >
        <img
          src="https://cdn.glitch.com/605e2a51-d45f-4d87-a285-9410ad350515%2FLogo_Color.svg?v=1618199565140"
          alt=""
        />
        Remix on Glitch
      </a>
    </div>
    
  </body>
</html>
